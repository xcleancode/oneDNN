.. index:: pair: struct; dnnl_memory_desc_t
.. _doxid-structdnnl__memory__desc__t:

struct dnnl_memory_desc_t
=========================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Memory descriptor. :ref:`More...<details-structdnnl__memory__desc__t>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <dnnl_types.h>
	
	struct dnnl_memory_desc_t
	{
		// fields
	
		int :ref:`ndims<doxid-structdnnl__memory__desc__t_1a72ed50c98f23f513550255ca8917b473>`;
		:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` :ref:`dims<doxid-structdnnl__memory__desc__t_1a47052ab197c58af737ac2865796402ce>`;
		:ref:`dnnl_data_type_t<doxid-group__dnnl__api__memory_1ga012ba1c84ff24bdd068f9d2f9b26a130>` :ref:`data_type<doxid-structdnnl__memory__desc__t_1a3b691a662b154a03f4e81a7c68b1b175>`;
		:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` :ref:`padded_dims<doxid-structdnnl__memory__desc__t_1abd9c8bd4bc17b924e21b21ed919a52f9>`;
		:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` :ref:`padded_offsets<doxid-structdnnl__memory__desc__t_1a7061897266dca53429b1ea3b8672218f>`;
		:ref:`dnnl_dim_t<doxid-group__dnnl__api__memory_1ga872631b12a112bf43fba985cba24dd20>` :ref:`offset0<doxid-structdnnl__memory__desc__t_1a20a5edce338892ffdba47f8f11ddfe91>`;
		:ref:`dnnl_format_kind_t<doxid-group__dnnl__api__memory_1gaa75cad747fa467d9dc527d943ba3367d>` :ref:`format_kind<doxid-structdnnl__memory__desc__t_1ae6f8322c5cff0068a97e7fba2f123e2c>`;
		:ref:`dnnl_blocking_desc_t<doxid-structdnnl__blocking__desc__t>` :ref:`blocking<doxid-structdnnl__memory__desc__t_1a376a38353672131bfc67fe92bceb6c9e>`;
		:ref:`dnnl_wino_desc_t<doxid-structdnnl__wino__desc__t>` :ref:`wino_desc<doxid-structdnnl__memory__desc__t_1a17cbfada7a6188b0531ed563f44e6976>`;
		:ref:`dnnl_rnn_packed_desc_t<doxid-structdnnl__rnn__packed__desc__t>` :ref:`rnn_packed_desc<doxid-structdnnl__memory__desc__t_1ac8e3fced428d7d7a762cddcbfadadbbf>`;
		union dnnl_memory_desc_t::@2 :target:`format_desc<doxid-structdnnl__memory__desc__t_1a8905d9f91cc5350b58d74b291215ad0d>`;
		:ref:`dnnl_memory_extra_desc_t<doxid-structdnnl__memory__extra__desc__t>` :target:`extra<doxid-structdnnl__memory__desc__t_1ac60269949e318245e74713a7a0dae135>`;
	};
.. _details-structdnnl__memory__desc__t:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Memory descriptor.

The description is based on a number of dimensions, dimensions themselves, plus information about elements type and memory format. Additionally, contains format-specific descriptions of the data layout.

Fields
------

.. index:: pair: variable; ndims
.. _doxid-structdnnl__memory__desc__t_1a72ed50c98f23f513550255ca8917b473:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int ndims

Number of dimensions.

.. index:: pair: variable; dims
.. _doxid-structdnnl__memory__desc__t_1a47052ab197c58af737ac2865796402ce:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` dims

Dimensions in the following order:

* CNN data tensors: mini-batch, channel, spatial (``{N, C, [[D,] H,] W}``)

* CNN weight tensors: group (optional), output channel, input channel, spatial (``{[G,] O, I, [[D,] H,] W}``)

* RNN data tensors: time, mini-batch, channels (``{T, N, C}``) or layers, directions, states, mini-batch, channels (``{L, D, S, N, C}``)

* RNN weight tensor: layers, directions, input channel, gates, output channels (``{L, D, I, G, O}``).

.. note:: 

   The order of dimensions does not depend on the memory format, so whether the data is laid out in :ref:`dnnl_nchw <doxid-group__dnnl__api__memory_1gga395e42b594683adb25ed2d842bb3091da83a751aedeb59613312339d0f8b90f54>` or :ref:`dnnl_nhwc <doxid-group__dnnl__api__memory_1gga395e42b594683adb25ed2d842bb3091dae50c534446b3c18cc018b3946b3cebd7>` the dims for 4D CN data tensor would be ``{N, C, H, W}``.

.. index:: pair: variable; data_type
.. _doxid-structdnnl__memory__desc__t_1a3b691a662b154a03f4e81a7c68b1b175:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_data_type_t<doxid-group__dnnl__api__memory_1ga012ba1c84ff24bdd068f9d2f9b26a130>` data_type

Data type of the tensor elements.

.. index:: pair: variable; padded_dims
.. _doxid-structdnnl__memory__desc__t_1abd9c8bd4bc17b924e21b21ed919a52f9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` padded_dims

Size of the data including padding in each dimension.

.. index:: pair: variable; padded_offsets
.. _doxid-structdnnl__memory__desc__t_1a7061897266dca53429b1ea3b8672218f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_dims_t<doxid-group__dnnl__api__memory_1ga8331e1160e52a5d4babe96736464095a>` padded_offsets

Per-dimension offset from the padding to actual data, the top-level tensor with offsets applied must lie within the padding area.

.. index:: pair: variable; offset0
.. _doxid-structdnnl__memory__desc__t_1a20a5edce338892ffdba47f8f11ddfe91:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_dim_t<doxid-group__dnnl__api__memory_1ga872631b12a112bf43fba985cba24dd20>` offset0

Offset from memory origin to the current block, non-zero only in a description of a memory sub-block.

.. index:: pair: variable; format_kind
.. _doxid-structdnnl__memory__desc__t_1ae6f8322c5cff0068a97e7fba2f123e2c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_format_kind_t<doxid-group__dnnl__api__memory_1gaa75cad747fa467d9dc527d943ba3367d>` format_kind

Memory format kind.

.. index:: pair: variable; blocking
.. _doxid-structdnnl__memory__desc__t_1a376a38353672131bfc67fe92bceb6c9e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_blocking_desc_t<doxid-structdnnl__blocking__desc__t>` blocking

Description of the data layout for memory formats that use blocking.

.. index:: pair: variable; wino_desc
.. _doxid-structdnnl__memory__desc__t_1a17cbfada7a6188b0531ed563f44e6976:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_wino_desc_t<doxid-structdnnl__wino__desc__t>` wino_desc

Tensor of weights for integer 8bit winograd convolution.

.. index:: pair: variable; rnn_packed_desc
.. _doxid-structdnnl__memory__desc__t_1ac8e3fced428d7d7a762cddcbfadadbbf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`dnnl_rnn_packed_desc_t<doxid-structdnnl__rnn__packed__desc__t>` rnn_packed_desc

Tensor of packed weights for RNN.

